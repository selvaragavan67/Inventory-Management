{% extends 'base.html' %}
{% block content %}
<h3>Record Product Movement</h3>
<form method="POST" action="/add_movement" class="mb-3">
  <label>Product</label>
  <select name="product" class="form-select mb-2" required>
    {% for p in products %}
      <option value="{{p.id}}">{{p.name}}</option>
    {% endfor %}
  </select>

  <label>From Location (leave blank if adding stock)</label>
  <select name="from_location" class="form-select mb-2">
    <option value="">-- None --</option>
    {% for l in locations %}
      <option value="{{l.id}}">{{l.name}}</option>
    {% endfor %}
  </select>

  <label>To Location (leave blank if removing stock)</label>
  <select name="to_location" class="form-select mb-2">
    <option value="">-- None --</option>
    {% for l in locations %}
      <option value="{{l.id}}">{{l.name}}</option>
    {% endfor %}
  </select>

  <label>Quantity</label>
  <input type="number" name="quantity" class="form-control mb-2" required>

  <button class="btn btn-success">Submit</button>
</form>

<h4>All Movements</h4>
<table class="table table-striped">
  <tr><th>ID</th><th>Product</th><th>From</th><th>To</th><th>Qty</th><th>Time</th></tr>
  {% for m in movements %}
  <tr>
    <td>{{m.id}}</td>
    <td>{{m.product_id}}</td>
    <td>{{m.from_location}}</td>
    <td>{{m.to_location}}</td>
    <td>{{m.quantity}}</td>
    <td>{{m.timestamp.strftime("%Y-%m-%d %H:%M:%S")}}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
